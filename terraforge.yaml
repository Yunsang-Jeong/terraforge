metafiles:
  - metadata.yaml

default_tags: &default_tags
  ManagedByTerraform: true
  Proejct: {{metadata "project"}}
  Owner: {{metadataIfEqual "owner" "env" "prod"}}

aws_provider:
  - name: default
    region: {{metadata "region"}}
    default_tags:
      <<: *default_tags
      Region: {{metadata "region"}}
  - name: apne2
    region: ap-nortehast-2
    default_tags:
      <<: *default_tags
      Region: ap-nortehast-2
    condition:
      - {{need_multiple_provider}}
  - name: use1
    region: us-east-1
    default_tags:
      <<: *default_tags
      Region: us-east-1
    condition:
      - {{need_multiple_provider}}

s3_backend:
  bucket: mybucket
  key   : path/to/my/key
  region: ap-nortehast-2

variable:
  - name : project
    type: string
    default: {{metadata "project"}}
  - name : owner
    type: string
    default: {{metadata "owner"}}
  - name : region
    type: string
    default: {{metadata "region"}}
  - name : env
    type: string
    default: {{metadata "env"}}
  - name : env2
    type: list(string)
    default: []
